<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book API</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <script>
        window.onload = () => {
    document.querySelectorAll(".collapsible").forEach((t => {
        t.addEventListener("click", ( () => {
            document.querySelectorAll(".content").forEach((e => {
                e !== t.nextElementSibling && (e.style.display = "none")
            }
            ));
            const e = t.nextElementSibling;
            e.style.display = "block" === e.style.display ? "none" : "block"
        }
        ))
    }
    )),
    document.querySelectorAll("form").forEach((t => {
        t.addEventListener("submit", (e => {
            e.preventDefault();
            const n = new FormData(t)
              , o = new URLSearchParams(n).toString()
              , r = t.querySelector('input[name="method"]:checked')
              , l = r ? r.value : t.dataset.method
              , s = t.dataset.endpoint + (o && "POST" !== l ? `?${o}` : "")
              , a = t.nextElementSibling;
            fetch(s, {
                method: l,
                headers: "POST" === l ? {
                    "Content-Type": "application/json"
                } : void 0,
                body: "POST" === l ? JSON.stringify(Object.fromEntries(n)) : void 0
            }).then((t => {
                const e = `Status: ${t.status}\nContent-Length: ${t.headers.get("Content-Length")}`;
                return t.ok ? "HEAD" !== l ? t.text().then((t => {
                    t.length > 300 && (t = t.substring(0, 300) + "..."),
                    a.textContent = `${e}\nResponse: ${t}`
                }
                )) : void (a.textContent = e) : t.text().then((t => {
                    throw a.textContent = `${e}\nError: ${t}`,
                    new Error(t)
                }
                ))
            }
            )).catch((t => {
                a.textContent.includes("Status:") || (a.textContent = "Error: " + t.message)
            }
            ))
        }
        ))
    }
    ))
}
;


    </script>
</head>
<body>
     <div class="mainContent">
    <a href="/">Test the Application Here</a><br>
    <a href="/docs">View the Documentation Here</a>

    <div class="endpoint">
      <h2 class="collapsible">
        /api/getBooks <span class="methods"><code>GET</code> <code>HEAD</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="GET" data-endpoint="/getBooks">
            <label><input type="radio" name="method" value="GET" checked> GET</label>
            <label><input type="radio" name="method" value="HEAD"> HEAD</label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>

    <div class="endpoint">
      <h2 class="collapsible">
        /api/findByAuthor <span class="methods"><code>GET</code> <code>HEAD</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="GET" data-endpoint="/findByAuthor">
            
            <label>Author: <input type="text" name="author"></label><br>
           
            <label><input type="radio" name="method" value="GET" checked> GET</label>
            <label><input type="radio" name="method" value="HEAD"> HEAD</label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>

    <div class="endpoint">
      <h2 class="collapsible">
        /api/findByTitle <span class="methods"><code>GET</code> <code>HEAD</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="GET" data-endpoint="/findByTitle">
            <label>Title: <input type="text" name="title"></label><br>
            <label><input type="radio" name="method" value="GET" checked> GET</label>
            <label><input type="radio" name="method" value="HEAD"> HEAD</label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>

    <div class="endpoint">
      <h2 class="collapsible">
        /api/bookCountries <span class="methods"><code>GET</code> <code>HEAD</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="GET" data-endpoint="/bookCountries">
            <label><input type="radio" name="method" value="GET" checked> GET</label>
            <label><input type="radio" name="method" value="HEAD"> HEAD</label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>


    <div class="endpoint">
      <h2 class="collapsible">
        /api/addBook <span class="methods"><code>POST</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="POST" data-endpoint="/addBook">
            <label>Title: <input type="text" name="title"></label><br>
            <label>Year: <input type="text" name="year"></label><br>
            <label>Author: <input type="text" name="author"></label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>
    
    <div class="endpoint">
      <h2 class="collapsible">
        /api/addRating <span class="methods"><code>POST</code></span>
      </h2>
      <div class="content">
        <div class="content-box">
          <h3>Test This Endpoint</h3>
          <form data-method="POST" data-endpoint="/addRating">
            <label>Title: <input type="text" name="title"></label><br>
            <label>Rating: <input type="text" name="rating"></label><br>
            <button type="submit">Send Request</button>
          </form>
          <pre class="result"></pre>
        </div>
      </div>
    </div>
</body>
</html>